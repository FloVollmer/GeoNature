
<md-card class="padding-md-all">
  <div class="row row-sm">
    <!--Filter-->
    
    <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 padding-sm">
      <pnx-taxonomy
      [parentFormControl]="inputTaxon"
      [idList]="1001"
      [charNumber]="3"
      [listLength]="20"
      (taxonChanged)="taxonChanged($event)">
      </pnx-taxonomy>
    </div>
    

    <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 padding-sm">
      <pnx-observers
      [parentFormControl]="inputObservers"
      [idMenu]="9"
      (observerSelected)="observerChanged($event)"
      (observerDeleted)="observerDeleted($event)"
      placeholder="{{ 'Releve.Observers' | translate }}">
      </pnx-observers>
    </div>
    
    
    <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 padding-sm">
      <pnx-date
        placeholder="{{ 'Releve.MinDate' | translate }} "
        [parentFormControl]="dateMin"
        (dateChanged)="dateMinChanged($event)">
      </pnx-date>
    </div>
    
    
    <div class="col-xs-2 col-sm-2 col-md-1 col-lg-2 padding-sm">
        <pnx-date
          placeholder="{{ 'Releve.MaxDate' | translate }} "
          [parentFormControl]="dateMax"
          (dateChanged)="dateMaxChanged($event)">
        </pnx-date>   
    </div>
    
    <button md-icon-button mdTooltip="Filter columns" class="margin-left-md to-collapse" data-toggle="collapse" data-target="#collapseColumns" aria-expanded="false" aria-controls="contexte">
      <i class="fa fa-columns" aria-hidden="true"></i>
    </button>
    

    <button md-icon-button mdTooltip="Filter options" class="margin-left-md to-collapse" data-toggle="collapse" data-target="#collapseAvance" aria-expanded="false" aria-controls="contexte">
        <md-icon>filter_list</md-icon>
    </button>
    </div>

    <!--collapseAvance-->
  <div class="row row-sm">
    <!-- Filtre columns -->
    <div class="selected-column collapse width-100" id="collapseColumns">
      <h5>Colonnes</h5>
      <ul>
        <li *ngFor='let col of allColumns '>
          <input
            type='checkbox'
            [id]="col.name"
            (click)='toggle(col)'
            [checked]='isChecked(col)'
          />
          <label [attr.for]="col.name">{{col.name}}</label>
        </li>
      </ul>
    </div>
        <!--Filter Avancé-->
      <div class="collapse width-100" id="collapseAvance">
          <div class="input-group width-60 alignment-xs">
            <input [formControl]="genericFilter" type="text" class="form-control font-md" placeholder="Search" aria-label="Text input with dropdown button" >
            <div class="input-group-btn">
              <button type="button" class="btn btn-secondary dropdown-toggle font-md" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Par {{filterSelected.name | titlecase}}
              </button>
              <div class="dropdown-menu dropdown-menu-right">
                <a class="dropdown-item font-md" *ngFor="let list of allColumns" (click)="onChangeFilterOps(list)">Par {{list.name | titlecase}}</a>
              </div>
            </div>
          </div>
      </div>
  </div>

  <div class="row row-sm">
    <div class="offset-md-11">
      <button mdTooltip="Ajouter un relevé" type="button" id="redirect" class="btn btn-success" (click)="redirect()">
        <i class="fa fa-plus-circle" aria-hidden="true"></i>
      </button>
    </div>
  </div>

</md-card>
<!--Table-->
<ngx-datatable
  #table
  class="material striped margin-top-xs table-size expandable"
  [rows]="rows"
  [columns]="displayColumns"
  [columnMode]="'force'"
  [headerHeight]="50"
  [footerHeight]="50"
  [rowHeight]="50"
  [draggable]="false"
  [selected]="selected"
  [externalPaging]="true"
  [selectionType]="'single'"
  [count]="mapListService.page.totalElements"
  [offset]="mapListService.page.pageNumber"
  [limit]="mapListService.page.size"
  (page)="setPage($event)"
  (select)="onSelect($event)"
  >

<ngx-datatable-column
 maxWidth="50">
<ng-template let-row="row" ngx-datatable-cell-template>
  <i mdTooltip="Edit relevé {{row.id}}" class="fa fa-pencil-square-o fa-lg" aria-hidden="true" (click)="onEditReleve(row.id)"></i>
</ng-template>
</ngx-datatable-column>

<ngx-datatable-column
 maxWidth="50">
<ng-template let-row="row" ngx-datatable-cell-template> 
  <i  mdTooltip="Info relevé {{row.id}}" class="fa fa-info-circle" aria-hidden="true" (click)="onDetailReleve(row.id)"></i>
</ng-template>
</ngx-datatable-column>
  <ngx-datatable-column
   *ngFor="let col of displayColumns"
   [name]="col.name"
   [prop]="col.prop">
  </ngx-datatable-column>
</ngx-datatable>


