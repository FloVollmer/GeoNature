<div class=form-containter *ngIf="fs.defaultValuesLoaded">
  <div class="card">
    <h5 class="card-header"> <b>{{ 'Releve.Releve' | translate }} </b></h5>
    <div class="card-body">        
        <div [formGroup]="fs.releveForm">
          <pnx-observation
            [releveForm]="fs.releveForm  ">
          </pnx-observation>
        </div>
        
    </div>
    </div> 

      <!-- Occurrence taxon  -->
      <div class="card card-occurrence">
        <div class="card-header" (click)="fs.toggleOccurrence()">
          <h5> Taxon 
          <button type="button" class="btn btn-success btn-sm toggle-btn" > 
              <span *ngIf="!fs.showOccurrence"> <i class="fa fa-chevron-down" aria-hidden="true"></i>
              </span>
              <span *ngIf="fs.showOccurrence"> <i class="fa fa-chevron-up" aria-hidden="true"></i>
              </span>
          </button> 
        </h5>  
        </div>
          <div class="card-body" *ngIf="fs.showOccurrence"> 
              <pnx-occurrence
                [occurrenceForm]="fs.occurrenceForm">
              </pnx-occurrence>
            <div [formGroup]="fs.occurrenceForm">
                <b> {{ 'Counting.Counting' | translate }}: </b>
                <!-- COUNTING -->
                <div *ngFor="let counting of fs.nbCounting; let i = index">
                  <pnx-counting 
                    [formArray]="fs.countingForm"
                    [index]="i"
                    [length]="fs.nbCounting.length"
                    (countingRemoved)="fs.removeCounting($event)">
                  </pnx-counting>
                </div>
                <button id="addOccurrence" type="button" class="btn btn-primary btn-sm" (click)="fs.addCounting()">
                  <i class="fa fa-plus-circle" aria-hidden="true"></i>          
                </button>
            </div>
            <div class="center">
                <button class="btn btn-primary btn-sm "
                  [disabled]="fs.occurrenceForm.invalid || fs.countingForm.invalid"
                  (click)="fs.addOccurrence(fs.indexOccurrence)">{{ 'Taxon.AddTaxon' | translate }} {{fs.currentTaxon.lb_nom}}
                </button>
            </div>
          </div>
      </div>

      <!-- <pre>form value: <br>{{fs.countingForm.value | json}}</pre> -->
      <!-- <pre>form value: <br>{{fs.occurrenceForm.value | json}}</pre> -->
      <!-- <pre>form value: <br>{{fs.releveForm.value.properties | json}}</pre>
      <pre>taxon list: <br>{{fs.taxonsList | json}}</pre> -->

        <div class=center>
            <button class="btn btn-success" 
            [disabled]="(fs.releveForm.invalid || fs.taxonsList == 0)"
            (click)="submitData()" >{{ 'Releve.SaveReleve' | translate }}
            </button>
        </div>


    </div>





